<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–´ë¦°ì´ì§‘ ì„ ìƒë‹˜ ì¼ì • ê³µìœ  ë‹¬ë ¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .calendar-day:hover { transform: translateY(-2px); transition: all 0.2s ease; }
        .event-dot { width: 6px; height: 6px; border-radius: 50%; margin: 1px; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- í—¤ë” -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ« ì–´ë¦°ì´ì§‘ ì¼ì • ë‹¬ë ¥</h1>
                    <p class="text-gray-600">ì„ ìƒë‹˜ë“¤ì˜ ì¼ì •ì„ í•¨ê»˜ ê³µìœ í•´ìš”</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="prevMonth()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                        â† ì´ì „ë‹¬
                    </button>
                    <span id="currentMonth" class="text-xl font-semibold text-gray-800 min-w-32 text-center"></span>
                    <button onclick="nextMonth()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                        ë‹¤ìŒë‹¬ â†’
                    </button>
                </div>
            </div>
        </div>

        <!-- ì¼ì • ê²€ìƒ‰ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ” ì¼ì • ê²€ìƒ‰</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <input type="text" id="searchInput" placeholder="ì¼ì • ì œëª©ì´ë‚˜ ì„ ìƒë‹˜ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <select id="filterTeacher" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">ëª¨ë“  ì„ ìƒë‹˜</option>
                    <option value="ê¹€ì„ ìƒë‹˜">ê¹€ì„ ìƒë‹˜</option>
                    <option value="ì´ì„ ìƒë‹˜">ì´ì„ ìƒë‹˜</option>
                    <option value="ë°•ì„ ìƒë‹˜">ë°•ì„ ìƒë‹˜</option>
                    <option value="ìµœì„ ìƒë‹˜">ìµœì„ ìƒë‹˜</option>
                    <option value="ì „ì²´">ì „ì²´</option>
                </select>
                <button onclick="clearSearch()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors font-medium">
                    ê²€ìƒ‰ ì´ˆê¸°í™”
                </button>
            </div>
        </div>

        <!-- ë‹¬ë ¥ -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <!-- ìš”ì¼ í—¤ë” -->
            <div class="grid grid-cols-7 gap-2 mb-4">
                <div class="text-center font-semibold text-red-600 py-3">ì¼</div>
                <div class="text-center font-semibold text-gray-700 py-3">ì›”</div>
                <div class="text-center font-semibold text-gray-700 py-3">í™”</div>
                <div class="text-center font-semibold text-gray-700 py-3">ìˆ˜</div>
                <div class="text-center font-semibold text-gray-700 py-3">ëª©</div>
                <div class="text-center font-semibold text-gray-700 py-3">ê¸ˆ</div>
                <div class="text-center font-semibold text-blue-600 py-3">í† </div>
            </div>
            
            <!-- ë‹¬ë ¥ ë‚ ì§œ -->
            <div id="calendarGrid" class="grid grid-cols-7 gap-2">
                <!-- ë‹¬ë ¥ ë‚ ì§œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ì¼ì • ëª©ë¡ -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mt-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“‹ ì´ë²ˆ ë‹¬ ì¼ì • ëª©ë¡</h2>
            <div id="eventList" class="space-y-3">
                <!-- ì¼ì • ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- ì¼ì • ìƒì„¸ ëª¨ë‹¬ -->
    <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">ì¼ì • ìƒì„¸</h3>
            <div id="modalContent" class="space-y-3">
                <!-- ëª¨ë‹¬ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeModal()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ìƒˆ ì¼ì • ì¶”ê°€ ëª¨ë‹¬ -->
    <div id="addEventModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“ ìƒˆ ì¼ì • ì¶”ê°€</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë‚ ì§œ</label>
                    <input type="date" id="modalEventDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" readonly>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì¼ì • ì œëª©</label>
                    <input type="text" id="modalEventTitle" placeholder="ì¼ì • ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë‹´ë‹¹ ì„ ìƒë‹˜</label>
                    <select id="modalEventTeacher" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">ì„ ìƒë‹˜ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="ê¹€ì„ ìƒë‹˜">ê¹€ì„ ìƒë‹˜</option>
                        <option value="ì´ì„ ìƒë‹˜">ì´ì„ ìƒë‹˜</option>
                        <option value="ë°•ì„ ìƒë‹˜">ë°•ì„ ìƒë‹˜</option>
                        <option value="ìµœì„ ìƒë‹˜">ìµœì„ ìƒë‹˜</option>
                        <option value="ì „ì²´">ì „ì²´</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨ (ì„ íƒì‚¬í•­)</label>
                    <textarea id="modalEventMemo" placeholder="ì¶”ê°€ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                </div>
            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeAddEventModal()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                    ì·¨ì†Œ
                </button>
                <button onclick="saveEventFromModal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                    ì €ì¥
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let events = [
            {
                date: '2024-01-15',
                title: 'ìƒˆí•™ê¸° ì¤€ë¹„ íšŒì˜',
                teacher: 'ì „ì²´',
                color: 'bg-blue-500'
            },
            {
                date: '2024-01-20',
                title: 'ë¶€ëª¨ ìƒë‹´',
                teacher: 'ê¹€ì„ ìƒë‹˜',
                color: 'bg-green-500'
            },
            {
                date: '2024-01-25',
                title: 'ìƒì¼íŒŒí‹°',
                teacher: 'ì´ì„ ìƒë‹˜',
                color: 'bg-pink-500'
            }
        ];

        const teacherColors = {
            'ê¹€ì„ ìƒë‹˜': 'bg-green-500',
            'ì´ì„ ìƒë‹˜': 'bg-pink-500',
            'ë°•ì„ ìƒë‹˜': 'bg-purple-500',
            'ìµœì„ ìƒë‹˜': 'bg-yellow-500',
            'ì „ì²´': 'bg-blue-500'
        };

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // ì›” í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('currentMonth').textContent = `${year}ë…„ ${month + 1}ì›”`;
            
            // ë‹¬ë ¥ ê·¸ë¦¬ë“œ ì´ˆê¸°í™”
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // ì²« ë²ˆì§¸ ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚  ê³„ì‚°
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            // 6ì£¼ í‘œì‹œ
            for (let week = 0; week < 6; week++) {
                for (let day = 0; day < 7; day++) {
                    const currentDay = new Date(startDate);
                    currentDay.setDate(startDate.getDate() + (week * 7) + day);
                    
                    const dayElement = document.createElement('div');
                    dayElement.className = `calendar-day min-h-32 p-2 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 ${
                        currentDay.getMonth() !== month ? 'text-gray-400 bg-gray-50' : 'bg-white'
                    }`;
                    
                    const dateStr = currentDay.toISOString().split('T')[0];
                    const dayEvents = events.filter(event => event.date === dateStr);
                    
                    dayElement.innerHTML = `
                        <div class="font-medium ${day === 0 ? 'text-red-600' : day === 6 ? 'text-blue-600' : 'text-gray-800'} mb-1">${currentDay.getDate()}</div>
                        <div class="space-y-1">
                            ${dayEvents.slice(0, 3).map(event => `
                                <div class="text-xs px-1 py-0.5 ${event.color} text-white rounded truncate" title="${event.title} - ${event.teacher}">
                                    ${event.title}
                                </div>
                            `).join('')}
                            ${dayEvents.length > 3 ? `<div class="text-xs text-gray-500">+${dayEvents.length - 3}ê°œ ë”</div>` : ''}
                        </div>
                    `;
                    
                    let clickCount = 0;
                    dayElement.onclick = () => {
                        clickCount++;
                        if (clickCount === 1) {
                            setTimeout(() => {
                                if (clickCount === 1) {
                                    showDayEvents(dateStr, dayEvents);
                                }
                                clickCount = 0;
                            }, 300);
                        } else if (clickCount === 2) {
                            openAddEventModal(dateStr);
                            clickCount = 0;
                        }
                    };
                    calendarGrid.appendChild(dayElement);
                }
            }
            
            renderEventList();
        }

        function showDayEvents(date, dayEvents) {
            if (dayEvents.length === 0) return;
            
            const modal = document.getElementById('eventModal');
            const modalContent = document.getElementById('modalContent');
            
            const formattedDate = new Date(date + 'T00:00:00').toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            modalContent.innerHTML = `
                <h4 class="font-semibold text-gray-700 mb-3">${formattedDate}</h4>
                ${dayEvents.map(event => `
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <div class="w-4 h-4 ${event.color} rounded-full"></div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${event.title}</div>
                            <div class="text-sm text-gray-600">${event.teacher}</div>
                            ${event.memo ? `<div class="text-sm text-gray-500 mt-1">${event.memo}</div>` : ''}
                        </div>
                    </div>
                `).join('')}
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('eventModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function openAddEventModal(date) {
            const modal = document.getElementById('addEventModal');
            document.getElementById('modalEventDate').value = date;
            document.getElementById('modalEventTitle').value = '';
            document.getElementById('modalEventTeacher').value = '';
            document.getElementById('modalEventMemo').value = '';
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // ì œëª© ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤
            setTimeout(() => {
                document.getElementById('modalEventTitle').focus();
            }, 100);
        }

        function closeAddEventModal() {
            const modal = document.getElementById('addEventModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function saveEventFromModal() {
            const date = document.getElementById('modalEventDate').value;
            const title = document.getElementById('modalEventTitle').value;
            const teacher = document.getElementById('modalEventTeacher').value;
            const memo = document.getElementById('modalEventMemo').value;
            
            if (!title || !teacher) {
                alert('ì¼ì • ì œëª©ê³¼ ë‹´ë‹¹ ì„ ìƒë‹˜ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const newEvent = {
                date: date,
                title: title,
                teacher: teacher,
                memo: memo,
                color: teacherColors[teacher] || 'bg-gray-500'
            };
            
            events.push(newEvent);
            closeAddEventModal();
            renderCalendar();
            alert('ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function searchEvents() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filterTeacher = document.getElementById('filterTeacher').value;
            
            const filteredEvents = events.filter(event => {
                const matchesSearch = searchTerm === '' || 
                    event.title.toLowerCase().includes(searchTerm) || 
                    event.teacher.toLowerCase().includes(searchTerm) ||
                    (event.memo && event.memo.toLowerCase().includes(searchTerm));
                
                const matchesTeacher = filterTeacher === '' || event.teacher === filterTeacher;
                
                return matchesSearch && matchesTeacher;
            });
            
            displaySearchResults(filteredEvents);
        }

        function displaySearchResults(filteredEvents) {
            const eventList = document.getElementById('eventList');
            
            if (filteredEvents.length === 0) {
                eventList.innerHTML = '<p class="text-gray-500 text-center py-4">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const sortedEvents = filteredEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            eventList.innerHTML = sortedEvents.map(event => {
                const eventDate = new Date(event.date + 'T00:00:00');
                const formattedDate = eventDate.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'short'
                });
                
                return `
                    <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <div class="w-4 h-4 ${event.color} rounded-full"></div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${event.title}</div>
                            <div class="text-sm text-gray-600">${formattedDate} â€¢ ${event.teacher}</div>
                            ${event.memo ? `<div class="text-sm text-gray-500 mt-1">${event.memo}</div>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('filterTeacher').value = '';
            renderEventList();
        }

        function renderEventList() {
            const eventList = document.getElementById('eventList');
            const currentMonth = currentDate.getMonth();
            const currentYear = currentDate.getFullYear();
            
            const monthEvents = events.filter(event => {
                const eventDate = new Date(event.date + 'T00:00:00');
                return eventDate.getMonth() === currentMonth && eventDate.getFullYear() === currentYear;
            }).sort((a, b) => new Date(a.date) - new Date(b.date));
            
            if (monthEvents.length === 0) {
                eventList.innerHTML = '<p class="text-gray-500 text-center py-4">ì´ë²ˆ ë‹¬ì— ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            eventList.innerHTML = monthEvents.map(event => {
                const eventDate = new Date(event.date + 'T00:00:00');
                const formattedDate = eventDate.toLocaleDateString('ko-KR', {
                    month: 'long',
                    day: 'numeric',
                    weekday: 'short'
                });
                
                return `
                    <div class="flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <div class="w-4 h-4 ${event.color} rounded-full"></div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800">${event.title}</div>
                            <div class="text-sm text-gray-600">${formattedDate} â€¢ ${event.teacher}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        // ì´ˆê¸° ë Œë”ë§
        renderCalendar();

        // ê²€ìƒ‰ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        document.getElementById('searchInput').addEventListener('input', searchEvents);
        document.getElementById('filterTeacher').addEventListener('change', searchEvents);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969b4fe8d265ea97',t:'MTc1NDI4MTc1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
